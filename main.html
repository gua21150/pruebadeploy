<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Network Prediction</title>
</head>
<body>
    <h1>Neural Network Prediction</h1>
    
    <form id="prediction-form">
        <h3>Numerical Inputs</h3>
        <input type="number" id="Age" placeholder="Age" min="0" max="100">
        <input type="number" id="DailyRate" placeholder="Daily Rate" min="0" max="1000">
        <input type="number" id="DistanceFromHome" placeholder="Distance From Home" min="0" max="100">
        <input type="number" id="HourlyRate" placeholder="Hourly Rate" min="0" max="100">
        <input type="number" id="MonthlyIncome" placeholder="Monthly Income" min="0" max="20000">
        <input type="number" id="MonthlyRate" placeholder="Monthly Rate" min="0" max="50000">
        <input type="number" id="NumCompaniesWorked" placeholder="Number of Companies Worked" min="0" max="10">
        <input type="number" id="PercentSalaryHike" placeholder="Percent Salary Hike" min="0" max="100">
        <input type="number" id="TotalWorkingYears" placeholder="Total Working Years" min="0" max="50">
        <input type="number" id="TrainingTimesLastYear" placeholder="Training Times Last Year" min="0" max="10">
        <input type="number" id="YearsAtCompany" placeholder="Years At Company" min="0" max="50">
        <input type="number" id="YearsInCurrentRole" placeholder="Years In Current Role" min="0" max="50">
        <input type="number" id="YearsSinceLastPromotion" placeholder="Years Since Last Promotion" min="0" max="50">
        <input type="number" id="YearsWithCurrManager" placeholder="Years With Current Manager" min="0" max="50">
        
        <h3>Categorical Inputs</h3>
        <select id="BusinessTravel">
            <option value="" disabled selected>Select Business Travel</option>
            <option value="Travel_Rarely">Travel Rarely</option>
            <option value="Travel_Frequently">Travel Frequently</option>
            <option value="Non-Travel">Non-Travel</option>
        </select>
        <select id="Department">
            <option value="" disabled selected>Select Department</option>
            <option value="Sales">Sales</option>
            <option value="Research & Development">Research & Development</option>
            <option value="Human Resources">Human Resources</option>
        </select>
        <select id="Education">
            <option value="" disabled selected>Select Education Level</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <select id="EducationField">
            <option value="" disabled selected>Select Education Field</option>
            <option value="Human Resources">Human Resources</option>
            <option value="Life Sciences">Life Sciences</option>
            <option value="Marketing">Marketing</option>
            <option value="Medical">Medical</option>
            <option value="Other">Other</option>
            <option value="Technical Degree">Technical Degree</option>
        </select>
        <select id="EnvironmentSatisfaction">
            <option value="" disabled selected>Select Environment Satisfaction</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        <select id="Gender">
            <option value="" disabled selected>Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        <select id="JobInvolvement">
            <option value="" disabled selected>Select Job Involvement</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        <select id="JobLevel">
            <option value="" disabled selected>Select Job Level</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <select id="JobRole">
            <option value="" disabled selected>Select Job Role</option>
            <option value="Healthcare Representative">Healthcare Representative</option>
            <option value="Human Resources">Human Resources</option>
            <option value="Laboratory Technician">Laboratory Technician</option>
            <option value="Manager">Manager</option>
            <option value="Manufacturing Director">Manufacturing Director</option>
            <option value="Research Director">Research Director</option>
            <option value="Research Scientist">Research Scientist</option>
            <option value="Sales Executive">Sales Executive</option>
            <option value="Sales Representative">Sales Representative</option>
        </select>
        <select id="JobSatisfaction">
            <option value="" disabled selected>Select Job Satisfaction</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        <select id="MaritalStatus">
            <option value="" disabled selected>Select Marital Status</option>
            <option value="Divorced">Divorced</option>
            <option value="Married">Married</option>
            <option value="Single">Single</option>
        </select>        
        <select id="OverTime">
            <option value="" disabled selected>Select Over Time</option>
            <option value="Yes">Yes</option>
            <option value="No">No</option>
        </select>
        <select id="PerformanceRating">
            <option value="" disabled selected>Select Performance Rating</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        <select id="RelationshipSatisfaction">
            <option value="" disabled selected>Select Relationship Satisfaction</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        <select id="StockOptionLevel">
            <option value="" disabled selected>Select Stock Option Level</option>
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
        <select id="WorkLifeBalance">
            <option value="" disabled selected>Select Work Life Balance</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
        
        <button type="button" onclick="makePrediction()">Predict</button>
    </form>
    
    <p id="result"></p>
    
    <script>
        async function makePrediction() {
            const numericalInputs = {
                Age: parseFloat(document.getElementById('Age').value),
                DailyRate: parseFloat(document.getElementById('DailyRate').value),
                DistanceFromHome: parseFloat(document.getElementById('DistanceFromHome').value),
                HourlyRate: parseFloat(document.getElementById('HourlyRate').value),
                MonthlyIncome: parseFloat(document.getElementById('MonthlyIncome').value),
                MonthlyRate: parseFloat(document.getElementById('MonthlyRate').value),
                NumCompaniesWorked: parseFloat(document.getElementById('NumCompaniesWorked').value),
                PercentSalaryHike: parseFloat(document.getElementById('PercentSalaryHike').value),
                TotalWorkingYears: parseFloat(document.getElementById('TotalWorkingYears').value),
                TrainingTimesLastYear: parseFloat(document.getElementById('TrainingTimesLastYear').value),
                YearsAtCompany: parseFloat(document.getElementById('YearsAtCompany').value),
                YearsInCurrentRole: parseFloat(document.getElementById('YearsInCurrentRole').value),
                YearsSinceLastPromotion: parseFloat(document.getElementById('YearsSinceLastPromotion').value),
                YearsWithCurrManager: parseFloat(document.getElementById('YearsWithCurrManager').value)
            };

            const categoricalInputs = {
                BusinessTravel: document.getElementById('BusinessTravel').value,
                Department: document.getElementById('Department').value,
                Education: parseInt(document.getElementById('Education').value),
                EducationField: document.getElementById('EducationField').value,
                EnvironmentSatisfaction: parseInt(document.getElementById('EnvironmentSatisfaction').value),
                Gender: document.getElementById('Gender').value,
                JobInvolvement: parseInt(document.getElementById('JobInvolvement').value),
                JobLevel: parseInt(document.getElementById('JobLevel').value),
                JobRole: document.getElementById('JobRole').value,
                JobSatisfaction: parseInt(document.getElementById('JobSatisfaction').value),
                MaritalStatus: document.getElementById('MaritalStatus').value,
                OverTime: document.getElementById('OverTime').value,
                PerformanceRating: parseInt(document.getElementById('PerformanceRating').value),
                RelationshipSatisfaction: parseInt(document.getElementById('RelationshipSatisfaction').value),
                StockOptionLevel: parseInt(document.getElementById('StockOptionLevel').value),
                WorkLifeBalance: parseInt(document.getElementById('WorkLifeBalance').value)
            };

            const data = {
                numerical: numericalInputs,
                categorical: categoricalInputs
            };

            try {
                const response = await fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const resultText = result.prediction === 1 ? 'Yes' : 'No';
                document.getElementById('result').textContent = `Prediction: ${resultText}`;

            } catch (error) {
                // Log the error to the console for debugging purposes
                console.error('Error making prediction:', error);
                // Display a user-friendly error message on the page
                document.getElementById('result').textContent = 'Error making prediction';
            }
        }
    </script>
</body>
</html>
